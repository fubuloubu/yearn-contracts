import brownie


def test_evil_gauge(accounts, ychad, Contract, EvilGauge, StrategyProxy):
    user = accounts.at("0xA478c2975Ab1Ea89e8196811F51A7B7Ade33eB11", force=True)
    hacker = accounts[0]
    dai = Contract("0x6B175474E89094C44Da98b954EedeAC495271d0F")
    strategy_proxy = StrategyProxy.deploy({"from": ychad})
    evil_gauge = EvilGauge.deploy(dai, {"from": hacker})
    dai.transfer(strategy_proxy.proxy(), dai.balanceOf(user), {"from": user})
    before = dai.balanceOf(hacker)
    with brownie.reverts("!strategy"):
        strategy_proxy.deposit(evil_gauge, dai, {"from": hacker})
    assert dai.balanceOf(hacker) == before
